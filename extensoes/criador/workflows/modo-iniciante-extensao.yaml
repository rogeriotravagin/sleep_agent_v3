# ============================================
# WORKFLOW: Modo Iniciante - Criar Extens√£o
# ============================================
# Caminho r√°pido para criar extens√£o com
# 5 perguntas + gera√ß√£o aut√¥noma via Ralph
# ============================================

id: modo-iniciante-extensao
nome: Modo Iniciante - Criar Extens√£o R√°pida
descricao: Criar extens√£o completa em 5 perguntas + gera√ß√£o aut√¥noma via Ralph
comando: /iniciante-extensao
versao: "1.0"

# ============================================
# VIS√ÉO GERAL
# ============================================

visao_geral:
  objetivo: "Criar extens√£o rapidamente para usu√°rios que querem expandir o sistema"
  duracao_estimada: "15-20 minutos"
  resultado: "Extens√£o funcional com estrutura completa"

  diferencial: |
    Este modo simplifica a cria√ß√£o de extens√µes:
    - Apenas 5 perguntas essenciais
    - Sistema processa e expande automaticamente
    - Ralph gera todos os componentes

  integracao_ralph: true

# ============================================
# FASES
# ============================================

fases:
  # ------------------------------------------
  # FASE 1: BRIEFING EXPRESS
  # ------------------------------------------
  - numero: 1
    nome: BRIEFING EXPRESS
    descricao: "Coletar informa√ß√µes essenciais em 5 perguntas"
    agente: arquiteto-extensoes
    tempo_estimado: "3-5 minutos"

    etapas:
      - id: 5-perguntas
        nome: "5 Perguntas Essenciais"
        descricao: "Briefing simplificado"

        perguntas:
          - pergunta: "üéØ Qual √°rea/tema da extens√£o? (nome)"
            tipo: texto
            obrigatorio: true
            exemplo: "Financeiro"
            var: nome

          - pergunta: "üìù O que esta extens√£o faz? (descri√ß√£o breve)"
            tipo: texto
            obrigatorio: true
            exemplo: "Gerenciamento de finan√ßas pessoais e empresariais"
            var: descricao

          - pergunta: "üë§ Quem vai usar? (p√∫blico-alvo)"
            tipo: texto
            obrigatorio: true
            exemplo: "Empreendedores que precisam organizar finan√ßas"
            var: publico

          - pergunta: "‚ùì Quais problemas resolve? (3-5 principais)"
            tipo: lista
            obrigatorio: true
            exemplo:
              - "Desorganiza√ß√£o financeira"
              - "Falta de controle de gastos"
              - "Dificuldade em fazer or√ßamentos"
            var: problemas

          - pergunta: "üéÅ Quais resultados entrega? (principais entregas)"
            tipo: lista
            obrigatorio: true
            exemplo:
              - "Or√ßamentos organizados"
              - "Relat√≥rios de fluxo de caixa"
              - "An√°lises financeiras"
            var: resultados

        entregavel: briefing-express.md

    saida_fase: |
      ## Briefing Express

      - **Nome:** {{nome}}
      - **Descri√ß√£o:** {{descricao}}
      - **P√∫blico:** {{publico}}
      - **Problemas:** {{problemas}}
      - **Resultados:** {{resultados}}

  # ------------------------------------------
  # FASE 2: PROCESSAMENTO
  # ------------------------------------------
  - numero: 2
    nome: PROCESSAMENTO
    descricao: "Sistema processa e expande informa√ß√µes automaticamente"
    agente: arquiteto-extensoes
    tempo_estimado: "2-3 minutos"
    automatico: true

    etapas:
      - id: definir-agentes
        nome: "Definir Agentes"
        descricao: "Sugerir agentes baseado nos problemas/resultados"
        automatico: true

        processo:
          - "Analisar problemas listados"
          - "Identificar compet√™ncias necess√°rias"
          - "Sugerir 3 agentes complementares"
          - "Definir especialidades de cada um"

        entregavel: agentes-sugeridos.md

      - id: definir-tarefas
        nome: "Definir Tarefas"
        descricao: "Sugerir tarefas baseado nos resultados"
        automatico: true

        processo:
          - "Analisar resultados esperados"
          - "Mapear a√ß√µes necess√°rias"
          - "Criar lista de tarefas"
          - "Vincular a agentes"

        entregavel: tarefas-sugeridas.md

      - id: definir-conhecimento
        nome: "Definir Conhecimento"
        descricao: "Identificar base de conhecimento necess√°ria"
        automatico: true

        processo:
          - "Identificar metodologias da √°rea"
          - "Listar refer√™ncias principais"
          - "Definir temas de conhecimento"

        entregavel: conhecimento-sugerido.md

    saida_fase: |
      ## Processamento Completo

      ‚úÖ 3 agentes sugeridos
      ‚úÖ Tarefas mapeadas
      ‚úÖ Conhecimento identificado
      ‚úÖ Estrutura definida

  # ------------------------------------------
  # FASE 3: PREPARAR RALPH
  # ------------------------------------------
  - numero: 3
    nome: PREPARAR RALPH
    descricao: "Montar PRD para execu√ß√£o aut√¥noma do Ralph"
    agente: criador-workflows
    tempo_estimado: "1-2 minutos"
    automatico: true

    etapas:
      - id: montar-prd
        nome: "Montar PRD"
        descricao: "Criar documento de requisitos para o Ralph"
        automatico: true

        user_stories:
          - id: US001
            titulo: "Criar estrutura da extens√£o"
            descricao: "Criar extensao.yaml, README e diret√≥rios"
            criterios:
              - "extensao.yaml v√°lido"
              - "README documentado"
              - "Diret√≥rios criados"

          - id: US002
            titulo: "Criar agentes especializados"
            descricao: "Criar 3 agentes com identidade e especialidades"
            criterios:
              - "Identidade clara"
              - "Especialidades definidas"
              - "Regras documentadas"
              - "Processo de trabalho"

          - id: US003
            titulo: "Criar base de conhecimento"
            descricao: "Criar arquivos de conhecimento da √°rea"
            criterios:
              - "Metodologias documentadas"
              - "Refer√™ncias inclu√≠das"
              - "Exemplos pr√°ticos"

          - id: US004
            titulo: "Criar tarefas principais"
            descricao: "Criar 5-7 tarefas para os agentes"
            criterios:
              - "Entradas definidas"
              - "Templates de sa√≠da"
              - "Gates de qualidade"

          - id: US005
            titulo: "Criar workflows"
            descricao: "Criar workflow completo e modo iniciante"
            criterios:
              - "Fases documentadas"
              - "Checkpoints definidos"
              - "Integra√ß√£o Ralph"

          - id: US006
            titulo: "Integrar no sistema"
            descricao: "Atualizar delegacao.yaml e CLAUDE.md"
            criterios:
              - "Extens√£o registrada"
              - "Gatilhos configurados"
              - "Comandos documentados"

        entregavel: prd-extensao.json

      - id: gerar-prompt
        nome: "Gerar Prompt"
        descricao: "Criar prompt otimizado para Ralph"
        automatico: true

        entregavel: prompt-ralph.md

    saida_fase: |
      ## PRD Preparado

      üìã PRD com 6 user stories
      üéØ Crit√©rios de aceita√ß√£o definidos
      üìù Prompt otimizado gerado

  # ------------------------------------------
  # FASE 4: EXECUTAR RALPH
  # ------------------------------------------
  - numero: 4
    nome: EXECUTAR RALPH
    descricao: "Ralph executa gera√ß√£o aut√¥noma da extens√£o"
    agente: ralph
    tempo_estimado: "5-10 minutos"

    execucao:
      comando: "./frameworks/ralph/scripts/ralph.sh 30"

      parametros:
        prd: "output/criador/{{slug}}/prd-extensao.json"
        prompt: "output/criador/{{slug}}/prompt-ralph.md"
        output: "extensoes/{{slug}}/"
        max_iteracoes: 30

    etapas:
      - id: ralph-estrutura
        nome: "Gerar Estrutura"
        user_stories: ["US001"]

      - id: ralph-agentes
        nome: "Gerar Agentes"
        user_stories: ["US002"]

      - id: ralph-conhecimento
        nome: "Gerar Conhecimento"
        user_stories: ["US003"]

      - id: ralph-tarefas
        nome: "Gerar Tarefas"
        user_stories: ["US004"]

      - id: ralph-workflows
        nome: "Gerar Workflows"
        user_stories: ["US005"]

      - id: ralph-integracao
        nome: "Integrar Sistema"
        user_stories: ["US006"]

    saida_fase: |
      ## Ralph Executado

      ‚úÖ Estrutura criada
      ‚úÖ Agentes gerados
      ‚úÖ Conhecimento desenvolvido
      ‚úÖ Tarefas criadas
      ‚úÖ Workflows configurados
      ‚úÖ Sistema integrado

  # ------------------------------------------
  # FASE 5: ENTREGA
  # ------------------------------------------
  - numero: 5
    nome: ENTREGA
    descricao: "Apresentar resultado e oferecer refinamentos"
    agente: arquiteto-extensoes
    tempo_estimado: "2-3 minutos"

    etapas:
      - id: apresentar
        nome: "Apresentar Resultado"
        descricao: "Mostrar o que foi criado"

        template_apresentacao: |
          ## üéâ Extens√£o {{nome}} Criada!

          ### Estrutura
          ```
          extensoes/{{slug}}/
          ‚îú‚îÄ‚îÄ extensao.yaml
          ‚îú‚îÄ‚îÄ README.md
          ‚îú‚îÄ‚îÄ agentes/ ({{num_agentes}} agentes)
          ‚îú‚îÄ‚îÄ conhecimento/ ({{num_conhecimento}} arquivos)
          ‚îú‚îÄ‚îÄ tarefas/ ({{num_tarefas}} tarefas)
          ‚îî‚îÄ‚îÄ workflows/ ({{num_workflows}} workflows)
          ```

          ### Comandos Dispon√≠veis
          - `/{{slug}}` - Carregar extens√£o
          - `/iniciante-{{slug}}` - Modo r√°pido

          ### Agentes Criados
          {{#each agentes}}
          - **{{this.nome}}** - {{this.descricao}}
          {{/each}}

      - id: refinamentos
        nome: "Oferecer Refinamentos"
        descricao: "Perguntar se quer ajustar algo"

        opcoes_refinamento:
          - "Ajustar agentes"
          - "Adicionar mais tarefas"
          - "Expandir conhecimento"
          - "Refinar workflows"
          - "Est√° perfeito!"

        entregavel: resumo-final.md

# ============================================
# ENTREGA FINAL
# ============================================

entrega_final:
  formato: pasta
  local: extensoes/{{slug}}/
  estrutura: |
    {{slug}}/
    ‚îú‚îÄ‚îÄ extensao.yaml
    ‚îú‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ agentes/
    ‚îÇ   ‚îú‚îÄ‚îÄ AGENTE-1.md
    ‚îÇ   ‚îú‚îÄ‚îÄ AGENTE-2.md
    ‚îÇ   ‚îî‚îÄ‚îÄ AGENTE-3.md
    ‚îú‚îÄ‚îÄ conhecimento/
    ‚îÇ   ‚îî‚îÄ‚îÄ [arquivos de conhecimento]
    ‚îú‚îÄ‚îÄ tarefas/
    ‚îÇ   ‚îî‚îÄ‚îÄ [tarefas criadas]
    ‚îî‚îÄ‚îÄ workflows/
        ‚îú‚îÄ‚îÄ workflow-completo.yaml
        ‚îî‚îÄ‚îÄ modo-iniciante.yaml

# ============================================
# INTEGRA√á√ÉO RALPH
# ============================================

ralph:
  template_prd: frameworks/ralph/templates/prd-extensao.json
  template_prompt: frameworks/ralph/templates/prompt-extensao.md

  configuracao:
    max_iteracoes: 30
    paralelismo: false
    validacao: true

  fallback:
    se_ralph_falhar:
      acao: "gerar_manualmente"
      mensagem: "Ralph encontrou dificuldade. Gerando manualmente..."

# ============================================
# EXECU√á√ÉO
# ============================================

execucao:
  comando: /iniciante-extensao

  fluxo:
    1: "Fazer 5 perguntas essenciais"
    2: "Processar e expandir informa√ß√µes"
    3: "Montar PRD para Ralph"
    4: "Executar Ralph (gera√ß√£o aut√¥noma)"
    5: "Apresentar resultado"
    6: "Oferecer refinamentos"

  mensagem_inicial: |
    ## üöÄ Modo Iniciante - Criar Extens√£o

    Vou te ajudar a criar uma nova extens√£o para o Sleep Agent em poucos minutos!

    Preciso de apenas **5 informa√ß√µes** para come√ßar. Depois, o sistema gera tudo automaticamente.

    Vamos l√°?

  mensagem_final: |
    ## ‚úÖ Extens√£o Criada com Sucesso!

    Sua extens√£o **{{nome}}** est√° pronta com:
    - Estrutura completa
    - Agentes especializados
    - Tarefas configuradas
    - Workflows funcionais
    - Base de conhecimento

    **Para usar:** `/{{slug}}`

    Quer criar mais alguma coisa?

# ============================================
# FALLBACKS
# ============================================

fallbacks:
  se_area_vaga:
    acao: "pedir_clarificacao"
    mensagem: "Pode ser mais espec√≠fico sobre a √°rea? Por exemplo, em vez de 'neg√≥cios', seria 'gest√£o de projetos' ou 'vendas B2B'?"

  se_problemas_genericos:
    acao: "sugerir"
    mensagem: "Os problemas est√£o um pouco gen√©ricos. Pode dar exemplos mais espec√≠ficos do dia a dia?"

  se_extensao_similar:
    acao: "avisar"
    mensagem: "J√° existe a extens√£o {{similar}} que √© parecida. Deseja continuar criando uma nova ou expandir a existente?"
